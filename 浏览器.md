浏览器的结构：
  1.用户界面：除了浏览器主窗口显示的你请求的页面外，其他显示的各个部分都属于用户界面。
  2.浏览器引擎：在用户界面和渲染引擎之间传送指令。
  3.渲染引擎：负责显示请求的内容。负责解析代码，并将解析后的内容显示在屏幕上。
  4.网络：用于网络调用，比如 HTTP 请求。其接口与平台无关，并为所有平台提供底层实现。
  5.用户界面后端：用于绘制基本的窗口小部件，比如组合框和窗口。其公开了与平台无关的通用接口，而在底层使用操作系统的用户界面方法。
  6.JavaScript 解释器：用于解析和执行 JavaScript 代码。
  7.数据存储：这是持久层。浏览器需要在硬盘上保存各种数据，例如 Cookie。
  
渲染流程：
  1.渲染引擎一开始会从网络层获取请求文档的内容
  2.解析HTML文档，并将文档中的标签转化为dom节点树，同时，它也会解析外部CSS文件以及style标签中的样式数据
  3.这些样式信息连同HTML中的”可见内容”一道，被用于构建另一棵树——”渲染树(Render树)”
  4.渲染树由一些带有视觉属性的矩形组成，按照正确的顺序显示在频幕上
  5.渲染树构建完毕之后，将会进入”布局”处理阶段
  6.为每一个节点分配一个屏幕坐标
  
  这个过程是逐步完成的，为了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的html都解析完成之后再去构建和布局render树。它是解析完一部分内容就显示一部分内容，同时，可能还在通过网络下载其余内容。
<img title="Webkit主流程" src="https://images2015.cnblogs.com/blog/1025036/201703/1025036-20170303123707641-167523877.png">

处理脚本和样式表的流程:
1.脚本
　　网络的模型是同步的。网页作者希望解析器遇到 <script> 标记时立即解析并执行脚本。文档的解析将停止，直到脚本执行完毕。如果脚本是外部的，那么解析过程会停止，直到从网络同步抓取资源完成后再继续。此模型已经使用了多年，也在 HTML4 和 HTML5 规范中进行了指定。作者也可以将脚本标注为“defer”(<script type="text/javascript" defer="defer">)，这样它就不会停止文档解析，而是等到解析结束才执行。HTML5 增加了一个选项，可将脚本标记为异步，以便由其他线程解析和执行。
2.预解析
  Webkit 和 Firefox 都进行了这项优化。在执行脚本时，其他线程会解析文档的其余部分，找出并加载需要通过网络加载的其他资源。通过这种方式，资源可以在并行连接上加载，从而提高总体速度。请注意，预解析器不会修改 DOM 树，而是将这项工作交由主解析器处理；预解析器只会解析外部资源（例如外部脚本、样式表和图片）的引用。
3.样式表
  另一方面，样式表有着不同的模型。理论上来说，应用样式表不会更改 DOM 树，因此似乎没有必要等待样式表并停止文档解析。但这涉及到一个问题，就是脚本在文档解析阶段会请求样式信息。如果当时还没有加载和解析样式，脚本就会获得错误的回复，这样显然会产生很多问题。这看上去是一个非典型案例，但事实上非常普遍。Firefox 在样式表加载和解析的过程中，会禁止所有脚本。而对于 Webkit 而言，仅当脚本尝试访问的样式属性可能受尚未加载的样式表影响时，它才会禁止该脚本。
  





  
  
